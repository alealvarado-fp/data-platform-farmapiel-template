@startuml C4_Container_Dataplex
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml

Person(user, "Data Engineer / Analyst")

System_Boundary(c1, "Plataforma de Datos") {
    Container(api, "API de Ingesta / Procesos", "Python / Airflow", "Ejecuta procesos de datos e inyecta etiquetas")
    
    ContainerDb(bq, "BigQuery (Dataset)", "Google BigQuery", "Almacena tablas productivas (dm_...)")
    ContainerDb(gcs, "Data Lake (Landing)", "Cloud Storage", "Archivos Parquet (gs://...)")

    System(dataplex, "Google Dataplex", "Gobierno, Cat√°logo y Linaje", "Centraliza el linaje y aplica reglas de calidad de datos")
}

Rel(api, bq, "Carga datos con Etiquetas", "gRPC / SQL")
Rel(api, gcs, "Sube archivos", "HTTPS")

Rel(dataplex, bq, "Cataloga y monitorea linaje", "Metadata API")
Rel(dataplex, gcs, "Cataloga archivos y zonas", "Metadata API")
Rel(user, dataplex, "Consulta linaje y calidad", "Console / API")

@enduml